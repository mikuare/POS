<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ruel's Letchon Baka</title>
    <link rel="icon" type="image/png" sizes="32x32" href="/Business%20Logo/Ruels%20Logo%20for%20business.png" />
    <link rel="icon" type="image/png" sizes="192x192" href="/Business%20Logo/Ruels%20Logo%20for%20business.png" />
    <link rel="apple-touch-icon" sizes="180x180" href="/Business%20Logo/Ruels%20Logo%20for%20business.png" />
    <link rel="stylesheet" href="/styles.css" />
  </head>
  <body class="auth-checking">
    <div id="globalToast" class="global-toast" aria-live="polite" aria-hidden="true">
      <div id="globalToastTitle" class="global-toast-title"></div>
      <div id="globalToastMessage" class="global-toast-message"></div>
    </div>
    <section id="authGate" class="auth-gate" aria-label="Login or Sign Up">
      <div class="auth-split">
        <aside class="auth-brand-panel">
          <div class="auth-brand-logo-wrap" aria-label="Ruel's Letchon Baka animated logo">
            <video
              id="authLogoVideo"
              class="auth-logo-source"
              src="/live logo/logo live.mp4"
              autoplay
              muted
              loop
              playsinline
            ></video>
            <canvas id="authLogoCanvas" class="auth-brand-logo"></canvas>
          </div>
          <h1>Ruel's Letchon Baka</h1>
          <p>Welcome back. Sign in or create an account to continue to the product dashboard.</p>
        </aside>
        <section class="auth-form-panel">
          <div class="auth-card">
            <div class="auth-mode-switch" role="tablist" aria-label="Authentication mode">
              <button id="showLoginBtn" class="auth-mode-btn active" type="button" role="tab" aria-selected="true">Login</button>
              <button id="showSignupBtn" class="auth-mode-btn" type="button" role="tab" aria-selected="false">Sign Up</button>
            </div>

            <form id="loginForm" class="auth-form" autocomplete="on">
              <h2>Login</h2>
              <label for="loginEmail">Email</label>
              <input id="loginEmail" type="email" required autocomplete="email" placeholder="you@example.com" />
              <label for="loginPassword">Password</label>
              <input id="loginPassword" type="password" required autocomplete="current-password" placeholder="Enter password" />
              <button type="submit">Login to Dashboard</button>
            </form>

            <form id="signupForm" class="auth-form hidden" autocomplete="on">
              <h2>Create Account</h2>
              <label for="signupName">Full Name</label>
              <input id="signupName" type="text" required autocomplete="name" placeholder="Your name" />
              <label for="signupEmail">Email</label>
              <input id="signupEmail" type="email" required autocomplete="email" placeholder="you@example.com" />
              <label for="signupRole">Role</label>
              <select id="signupRole" required>
                <option value="administrations">Administrations</option>
                <option value="supervisor">Supervisor</option>
                <option value="encharge" selected>Encharge</option>
              </select>
              <label for="signupPassword">Password</label>
              <input id="signupPassword" type="password" required minlength="6" autocomplete="new-password" placeholder="At least 6 characters" />
              <button type="submit">Sign Up and Continue</button>
            </form>

            <p id="authMessage" class="auth-message" aria-live="polite"></p>
          </div>
        </section>
      </div>
    </section>

    <div class="app">
      <div class="user-topbar">
        <div id="welcomeBanner" class="welcome-banner">
          <img id="welcomeRoleIcon" class="welcome-role-icon" src="/User Role/Encharge.png" alt="User role icon" />
          <span id="welcomeText">Welcome User, have a nice day.</span>
        </div>
        <div id="phDateTime" class="ph-datetime" aria-live="polite">Philippines Time: --</div>
        <div class="settings-menu-wrap">
          <button id="settingsToggleBtn" class="secondary" type="button" aria-haspopup="true" aria-expanded="false">Settings</button>
          <div id="settingsMenu" class="settings-menu" aria-hidden="true">
            <button id="settingsAdminDashboardBtn" type="button" style="display:none;">Admin Dashboard</button>
            <button id="settingsEditMenuBtn" type="button" style="display:none;">Edit Menu</button>
            <button id="logoutBtn" type="button">Logout</button>
          </div>
        </div>
      </div>
      <h1>POS System (Cash + GCash + PayMaya)</h1>

      <!-- Tab Navigation -->
      <div class="tabs">
        <button class="tab-btn active" data-tab="pos">POS Terminal</button>
        <button class="tab-btn" data-tab="admin">Admin / Transactions</button>
      </div>

      <!-- POS Terminal Tab -->
      <div id="tab-pos" class="tab-content active">
        <div class="pos-layout">
          <!-- Left Panel: Cart & Checkout -->
          <div class="left-panel">
            <section class="card">
              <div class="order-brand">
                <div class="order-brand-logo-wrap">
                  <img class="order-brand-logo" src="/Business Logo/Ruels Logo for business.png" alt="Business Logo" />


                </div>
                <div class="order-brand-text">
                  <div class="order-title-row">
                    <h2>Your Order</h2>
                    <div id="yummyOrderEmoji" class="yummy-emoji"></div>
                  </div>
                  <p>Review your order and complete payment Thankyou!</p>
                </div>
              </div>
              <div id="cart"></div>
              <div id="addToCartConfetti" class="add-to-cart-confetti"></div>
              <div class="order-totals" id="orderTotals">
                <div class="total-row">
                  <span>Subtotal</span>
                  <strong id="subtotalValue">PHP 0.00</strong>
                </div>
                <div class="total-row discount-row">
                  <label for="discountInput">Discount</label>
                  <input id="discountInput" type="number" min="0" step="0.01" value="0" />
                </div>
                <div class="total-row total-due-row">
                  <span>Total Due</span>
                  <strong id="totalDueValue">PHP 0.00</strong>
                </div>
              </div>

              <div class="row hidden-control">
                <label for="paymentMethod">Payment:</label>
                <select id="paymentMethod">
                  <option value="cash">Cash</option>
                  <option value="gcash">GCash</option>
                  <option value="paymaya">PayMaya</option>
                </select>
              </div>

              <div class="row" id="cashRow" style="display:none;">
                <label for="amountTendered">Amount Tendered:</label>
                <input id="amountTendered" type="number" min="0" placeholder="Enter cash amount" />
                <button id="cashPayBtn">Pay</button>
              </div>

              <div id="gcashInfo"></div>
              <div id="status" class="status">Ready.</div>
              <div id="statusReceiptActions" class="row status-receipt-actions" style="display:none;">
                <button id="statusPrintReceiptBtn" class="secondary" type="button" disabled>Print Receipt</button>
              </div>

              <div class="order-footer">
                <div class="order-footer-title">Order Checkout</div>
                <div class="order-type-buttons">
                  <button id="dineInCheckoutBtn">
                    <img class="checkout-btn-icon" src="/Other/Dine in.png" alt="Dine In" />
                    <span>Dine In Check Out</span>
                  </button>
                  <button id="takeOutCheckoutBtn">
                    <img class="checkout-btn-icon" src="/Other/Take out.png" alt="Take Out" />
                    <span>Take Out Check Out</span>
                  </button>
                </div>
                <div class="order-footer-title">Payment Method</div>
                <div class="payment-type-buttons">
                  <button id="cashPaymentBtn" class="secondary">
                    <img class="checkout-btn-icon" src="/Other/Cash.png" alt="Cash" />
                    <span>Cash</span>
                  </button>
                  <button id="ePaymentBtn" class="secondary">
                    <img class="checkout-btn-icon" src="/Other/E-Payment.png" alt="E-Payment" />
                    <span>E - Payment</span>
                  </button>
                </div>
                <div class="row">
                  <button id="clearBtn" class="secondary">Clear</button>
                </div>
              </div>

              <div id="paymentSuccessModal" class="payment-success-modal" aria-hidden="true">
                <div class="payment-success-card">
                  <div id="receiptPrintArea" class="receipt-print-area">
                    <div class="receipt-header">
                      <img class="receipt-logo" src="/Business Logo/Ruels Logo for business.png" alt="Ruel's Roast Beef Logo" />
                      <h3>Ruel's Roast Beef</h3>
                      <p>Location : Tres Martires, City of Baybay, 6521 Leyte</p>
                      <p>Vat Registered TIN 342-231-312-00000</p>
                    </div>
                    <div class="receipt-meta">
                      <div><span>Receipt No:</span> <strong id="receiptRef">-</strong></div>
                      <div><span>Date:</span> <strong id="receiptDate">-</strong></div>
                      <div><span>Order Type:</span> <strong id="receiptOrderType">-</strong></div>
                      <div><span>Payment:</span> <strong id="receiptPaymentMethod">-</strong></div>
                    </div>
                    <div id="receiptItems" class="receipt-items"></div>
                    <div class="receipt-totals">
                      <div><span>Subtotal</span><strong id="receiptSubtotal">PHP 0.00</strong></div>
                      <div><span>Discount</span><strong id="receiptDiscount">PHP 0.00</strong></div>
                      <div class="total-due"><span>Total Due</span><strong id="receiptTotalDue">PHP 0.00</strong></div>
                      <div><span>Amount Paid</span><strong id="receiptAmountPaid">PHP 0.00</strong></div>
                      <div><span>Change</span><strong id="receiptChange">PHP 0.00</strong></div>
                    </div>
                    <p class="receipt-footer">Thank you for dining with us!</p>
                  </div>
                  <div class="receipt-actions">
                    <button id="receiptMinimizeBtn" class="secondary">Minimize</button>
                    <button id="receiptPrintBtn">Print Receipt</button>
                    <button id="paymentSuccessDoneBtn" class="secondary">Cancel</button>
                  </div>
                </div>
              </div>

              <div id="eWalletModal" class="e-wallet-modal" aria-hidden="true">
                <div class="e-wallet-card">
                  <h3>Choose E-Payment</h3>
                  <p>Select your payment channel.</p>
                  <div class="e-wallet-options">
                    <button id="chooseGcashBtn" class="secondary e-wallet-option-btn">
                      <img src="/Other/GCash.png" alt="GCash" />
                      <span>GCash</span>
                    </button>
                    <button id="choosePaymayaBtn" class="secondary e-wallet-option-btn">
                      <img src="/Other/Maya.png" alt="PayMaya" />
                      <span>PayMaya</span>
                    </button>
                    <button id="chooseScanQrBtn" class="secondary e-wallet-option-btn">
                      <img src="/Other/E-Payment.png" alt="Scan QR" />
                      <span>Pay via Scan QR</span>
                    </button>
                  </div>
                  <button id="cancelEwalletBtn" class="secondary">Cancel</button>
                </div>
              </div>

              <div id="scanQrModal" class="e-wallet-modal" aria-hidden="true">
                <div class="e-wallet-card">
                  <h3>Scan QR to Pay</h3>
                  <p>Show this sample QR. Once customer presents proof of payment, click Finish.</p>
                  <div id="scanQrContent" class="scan-qr-content"></div>
                  <div class="row">
                    <button id="scanQrFinishBtn" type="button">Finish</button>
                    <button id="scanQrCancelBtn" class="secondary" type="button">Cancel</button>
                  </div>
                </div>
              </div>
            </section>

          </div>

          <!-- Right Panel: Categories & Products -->
          <div class="right-panel">
            <div class="category-sidebar">
              <h3>Menu</h3>
              <div id="categoryButtons"></div>
            </div>

            <div class="products-area">
              <section class="card">
                <h2 id="categoryTitle">Main Dish</h2>
                <div id="products" class="products-grid"></div>
              </section>
            </div>
          </div>
        </div>
      </div>

      <!-- Admin / Transactions Overlay -->
      <div id="tab-admin" class="tab-content admin-overlay">
        <div class="admin-shell">
          <div class="admin-shell-header">
            <h2>Admin Dashboard</h2>
            <button id="adminCloseBtn" class="secondary">Close</button>
          </div>
          <div class="admin-nav">
            <button id="adminNavOverviewBtn" class="secondary admin-nav-btn active" type="button">Overview</button>
            <button id="adminNavInventoryBtn" class="secondary admin-nav-btn" type="button">Inventory</button>
            <button id="adminNavKitSpecBtn" class="secondary admin-nav-btn" type="button">Kit Specification</button>
          </div>

          <div id="adminPanelOverview" class="admin-panel active">
          <div class="admin-grid">
          <section class="card full-width">
            <h2>Sales Summary</h2>
            <div class="row">
              <button id="salesDailyBtn" class="secondary">Today</button>
              <button id="salesWeeklyBtn" class="secondary">Last 7 Days</button>
              <button id="salesRefreshBtn">Refresh</button>
            </div>
            <div id="salesSummary" class="status">Loading sales report...</div>
            <div id="salesList" class="sales-list"></div>
          </section>

          <section class="card full-width">
            <h2>Sales: Detailed Output</h2>
            <div id="salesDetailedGrid" class="sales-detailed-grid">
              <div class="stat-item">
                <span class="stat-label">Daily Sales</span>
                <span class="stat-value" id="detailDailySales">PHP 0.00</span>
                <span class="stat-label" id="detailDailyMeta">0 transactions</span>
              </div>
              <div class="stat-item">
                <span class="stat-label">Monthly Sales</span>
                <span class="stat-value" id="detailMonthlySales">PHP 0.00</span>
                <span class="stat-label" id="detailMonthlyMeta">0 transactions</span>
              </div>
            </div>
            <div class="card" style="margin-top:10px;">
              <h3 style="margin-bottom:8px;">Top Sales per Product</h3>
              <div id="topProductsList" class="sales-list">
                <p>Loading top products...</p>
              </div>
            </div>
          </section>

          <!-- Transaction Filters -->
          <section class="card full-width">
            <h2>All Transactions</h2>
            <div class="row">
              <label for="adminFilter">Filter:</label>
              <select id="adminFilter">
                <option value="">All Statuses</option>
                <option value="PENDING">Pending</option>
                <option value="PAID">Paid</option>
              </select>
              <label for="adminRange">Range:</label>
              <select id="adminRange">
                <option value="daily">Today</option>
                <option value="weekly">Last 7 Days</option>
                <option value="">All Time</option>
              </select>
              <button id="adminRefreshBtn">Refresh</button>
              <button id="adminVerifyAllBtn" class="verify-btn">Verify All Pending</button>
            </div>
          </section>

          <!-- Transaction Stats -->
          <section class="card">
            <h2>Quick Stats</h2>
            <div id="adminStats" class="admin-stats">
              <div class="stat-item">
                <span class="stat-label">Total Transactions</span>
                <span class="stat-value" id="statTotal">0</span>
              </div>
              <div class="stat-item">
                <span class="stat-label">Paid</span>
                <span class="stat-value paid" id="statPaid">0</span>
              </div>
              <div class="stat-item">
                <span class="stat-label">Pending</span>
                <span class="stat-value pending" id="statPending">0</span>
              </div>
              <div class="stat-item">
                <span class="stat-label">Total Revenue</span>
                <span class="stat-value" id="statRevenue">PHP 0.00</span>
              </div>
              <div class="stat-item">
                <span class="stat-label">Cash Sales</span>
                <span class="stat-value" id="statCash">PHP 0.00</span>
              </div>
              <div class="stat-item">
                <span class="stat-label">E-Wallet Sales</span>
                <span class="stat-value" id="statGcash">PHP 0.00</span>
              </div>
            </div>
          </section>

          <!-- Transaction List -->
          <section class="card">
            <h2>Transaction List</h2>
            <div id="adminTransactions" class="admin-transactions">
              <p>Loading transactions...</p>
            </div>
          </section>
          </div>
          </div>

          <div id="adminPanelInventory" class="admin-panel">
            <section class="card full-width">
              <h2>Inventory</h2>
              <p>Track ingredient stocks and estimated usage per product based on paid sales.</p>
              <form id="inventoryIngredientForm" class="row">
                <input id="ingredientNameInput" type="text" placeholder="Ingredient name" required />
                <input id="ingredientQtyInput" type="number" min="0" step="0.001" placeholder="Quantity" required />
                <input id="ingredientPriceInput" type="number" min="0" step="0.01" placeholder="Unit price (PHP)" required />
                <input id="ingredientUnitInput" type="text" placeholder="Base unit (pcs, kg, liter)" value="pcs" required />
                <button id="ingredientAddBtn" type="submit">Add Ingredient</button>
              </form>
              <div id="inventoryAdminNote" class="status" style="display:none;">Only Administrations role can add ingredients. Other roles can view stocks.</div>
              <div id="inventorySummary" class="status">Loading inventory summary...</div>
              <div id="inventoryTableWrap" class="admin-transactions">
                <p>Loading ingredients...</p>
              </div>
            </section>
          </div>

          <div id="adminPanelKitSpec" class="admin-panel">
            <section class="card full-width">
              <h2>Kit Specification</h2>
              <p>Define product kit composition, required components, and standard quantity per kit.</p>
              <div id="kitSpecModule" class="status">Kit Specification module page is ready for your setup.</div>
            </section>
          </div>
        </div>
      </div>

      <div id="adminReceiptModal" class="admin-receipt-backdrop" aria-hidden="true">
        <div class="admin-receipt-card">
          <div id="adminReceiptPrintArea" class="receipt-print-area">
            <div class="receipt-header">
              <img class="receipt-logo" src="/Business Logo/Ruels Logo for business.png" alt="Ruel's Roast Beef Logo" />
              <h3>Ruel's Roast Beef</h3>
              <p>Location : Tres Martires, City of Baybay, 6521 Leyte</p>
              <p>Vat Registered TIN 342-231-312-00000</p>
            </div>
            <div class="receipt-meta">
              <div><span>Receipt No:</span> <strong id="adminReceiptRef">-</strong></div>
              <div><span>Date:</span> <strong id="adminReceiptDate">-</strong></div>
              <div><span>Order Type:</span> <strong id="adminReceiptOrderType">-</strong></div>
              <div><span>Payment:</span> <strong id="adminReceiptPaymentMethod">-</strong></div>
            </div>
            <div id="adminReceiptItems" class="receipt-items"></div>
            <div class="receipt-totals">
              <div><span>Subtotal</span><strong id="adminReceiptSubtotal">PHP 0.00</strong></div>
              <div><span>Discount</span><strong id="adminReceiptDiscount">PHP 0.00</strong></div>
              <div class="total-due"><span>Total Due</span><strong id="adminReceiptTotalDue">PHP 0.00</strong></div>
              <div><span>Amount Paid</span><strong id="adminReceiptAmountPaid">PHP 0.00</strong></div>
              <div><span>Change</span><strong id="adminReceiptChange">PHP 0.00</strong></div>
            </div>
            <p class="receipt-footer">Thank you for dining with us!</p>
          </div>
          <div class="receipt-actions">
            <button id="adminReceiptPrintBtn">Print Receipt</button>
            <button id="adminReceiptCloseBtn" class="secondary">Cancel</button>
          </div>
        </div>
      </div>
    </div>

    <div id="adminLoginModal" class="admin-login-backdrop" aria-hidden="true">
      <div class="admin-login-card">
        <h2>Admin Login</h2>
        <div class="row">
          <label for="adminUsername">Username:</label>
          <input id="adminUsername" type="text" autocomplete="off" />
        </div>
        <div class="row">
          <label for="adminPassword">Password:</label>
          <input id="adminPassword" type="password" autocomplete="new-password" />
        </div>
        <div id="adminLoginError" class="admin-login-error"></div>
        <div class="row">
          <button id="adminLoginBtn">Login</button>
          <button id="adminCancelBtn" class="secondary">Cancel</button>
        </div>
      </div>
    </div>

    <div id="menuEditorModal" class="menu-editor-backdrop" aria-hidden="true">
      <div class="menu-editor-card">
        <div class="menu-editor-header">
          <h2>Edit Menu</h2>
          <button id="menuEditorCloseBtn" class="secondary" type="button">Close</button>
        </div>
        <p class="menu-editor-note">Administrations and Supervisor can edit category/product name, image, and product price, plus add categories/products.</p>

        <section class="card">
          <h3>Add Category</h3>
          <form id="menuCategoryForm" class="row">
            <input id="menuCategoryNameInput" type="text" placeholder="Category name (e.g. Pasta)" required />
            <input id="menuCategoryImageFileInput" type="file" accept="image/*" />
            <button id="menuCategoryAddBtn" type="submit">Add Category</button>
          </form>
        </section>

        <section class="card">
          <h3>Add Product</h3>
          <form id="menuProductForm" class="row">
            <input id="menuProductNameInput" type="text" placeholder="Product name" required />
            <input id="menuProductPriceInput" type="number" min="0" step="0.01" placeholder="Price (PHP)" required />
            <select id="menuProductCategoryInput" required></select>
            <input id="menuProductImageFileInput" type="file" accept="image/*" />
            <button id="menuProductAddBtn" type="submit">Add Product</button>
          </form>
        </section>

        <section class="card">
          <h3>Edit Existing Categories</h3>
          <div id="menuCategoryEditorList" class="menu-category-editor-list">
            <p>Loading categories...</p>
          </div>
        </section>

        <section class="card">
          <h3>Edit Existing Products</h3>
          <div id="menuProductEditorList" class="menu-product-editor-list">
            <p>Loading products...</p>
          </div>
        </section>
      </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/bodymovin/5.12.2/lottie.min.js"></script>
    <script src="/app.js"></script>
  </body>
</html>



